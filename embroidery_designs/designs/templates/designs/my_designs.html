{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Мои дизайны</h1>
    
    {% if designs %}
    <div class="row">
        {% for design in designs %}
        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
            <div class="card h-100">
                <div class="design-image-container">
                    <img src="{{ design.image_preview.url }}" class="card-img-top design-image" alt="{{ design.title }}">
                    <div class="design-price-badge">
                        Куплено
                    </div>
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ design.title }}</h5>
                    <p class="card-text flex-grow-1">{{ design.description|truncatewords:10 }}</p>
                    
                    <div class="design-specs mt-auto">
                        <div class="row small text-muted">
                            <div class="col-6">
                                <i class="fas fa-robot"></i> 
                                {{ design.get_machine_type_display }}
                            </div>
                            <div class="col-6 text-end">
                                <i class="fas fa-ruler"></i>
                                {{ design.design_size }}
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <a href="{{ design.design_file.url }}" class="btn btn-success w-100" download="{{ design.title }}.{{ design.get_file_extension|lower }}">
                            <i class="fas fa-download"></i> Скачать
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5">
        <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
        <h4>У вас пока нет купленных дизайнов</h4>
        <p class="text-muted">Перейдите в каталог чтобы выбрать дизайны для покупки</p>
        <a href="{% url 'design_list' %}" class="btn btn-primary">Перейти в каталог</a>
    </div>
    {% endif %}
</div>

<style>
.design-image-container {
    position: relative;
    overflow: hidden;
    height: 200px;
}

.design-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.design-price-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(40, 167, 69, 0.9);
    color: white;
    padding: 5px 10px;
    border-radius: 15px;
    font-weight: bold;
    font-size: 0.8em;
}

.design-specs {
    border-top: 1px solid #eee;
    padding-top: 10px;
}
</style>
{% endblock %}